# ==============================================
# TownyCapture Configuration
# Author: LogicHH
# Discord: @milin001
# Website: conquerearthmc.com
# Version: 1.0.2
# ==============================================
#
# This configuration file contains all settings for TownyCapture.
# Please read through all options carefully before making changes.
# Any changes require a server restart or /capturepoint reload
#
# ==============================================

# Core Settings
# ==============================================
settings:
  # Whether to show capture-related chat messages
  show-chat-messages: true
  
  # Minimum number of players online to allow capturing
  # This helps prevent captures when the server is empty
  min-online-players: 3
  
  # Session timeout in milliseconds (default: 1 hour)
  # How long a capture session can be inactive before being cancelled
  session-timeout: 3600000
  
  # Error throttle duration in milliseconds (default: 1 minute)
  # Prevents spam of error messages for the same issue
  error-throttle-ms: 60000
  
  # Debug mode for detailed logging
  # Enable this to see detailed debug messages in console
  debug-mode: false
  
  # Auto-save interval in seconds (default: 5 minutes)
  # How often to save capture point data
  auto-save-interval: 300
  
  # Maximum number of capture points allowed
  # Set to 0 for unlimited points
  max-capture-points: 50
  
  # Maximum number of active captures allowed
  # Set to 0 for unlimited captures
  max-active-captures: 10

# Capture Mechanics
# ==============================================
capture:
  # Time settings (in minutes)
  preparation:
    # Time in minutes for preparation phase
    duration: 1
    # Whether to show countdown during preparation
    show-countdown: true
    # Whether to allow PvP during preparation
    allow-pvp: true
  # Time settings (in minutes)
  capture:
    # Time in minutes for capture phase
    duration: 15
    # Whether to show countdown during capture
    show-countdown: true
    # Whether to allow PvP during capture
    allow-pvp: true
    # Whether to allow block breaking during capture
    allow-block-break: false
    # Whether to allow block placing during capture
    allow-block-place: false
    # Whether to allow item use during capture
    allow-item-use: true
    # Whether to allow explosions during capture
    allow-explosions: false
    # Whether to allow teleporting during capture
    allow-teleport: false
    # Whether to allow claiming during capture
    allow-claiming: false
    # Whether to allow setting homes during capture
    allow-homes: false
  # Whether to allow using commands during capture
  allow-commands: false

# Sound Settings
# ==============================================
sounds:
  # Enable/disable all capture sounds
  enabled: true
  
  # Sound effects for different capture events
  capture-started:
    sound: "entity.wither.ambient"
    volume: 1.0
    pitch: 1.2
    
  capture-progress:
    sound: "block.note_block.pling"
    volume: 0.8
    pitch: 1.0
    
  capture-phase-started:
    sound: "entity.wither.spawn"
    volume: 1.2
    pitch: 1.0
    
  capture-complete:
    sound: "entity.player.levelup"
    volume: 1.5
    pitch: 1.2
    
  capture-failed:
    sound: "entity.ender_dragon.death"
    volume: 1.0
    pitch: 0.8
    
  point-reset:
    sound: "entity.experience_orb.pickup"
    volume: 1.0
    pitch: 1.0

# Mob Reinforcement Settings
# ==============================================
reinforcements:
  # Enable mob reinforcements during capture
  enabled: true
  
  # Number of mobs to spawn per wave
  mobs-per-wave: 1
  
  # Time between reinforcement waves (in seconds)
  wave-interval: 30
  
  # Maximum number of reinforcements per capture point
  # Note: With phased spawning, this can accumulate over time
  max-mobs-per-point: 50
  
  # Mob types that can spawn (with hat items for daylight)
  # WARNING: Do not include ENDER_DRAGON, it's too powerful and will break things
  mob-types:
    - "ZOMBIE"
    - "SKELETON"
    - "WITHER_SKELETON"
    - "STRAY"
    - "HUSK"
    - "ZOMBIE_VILLAGER"
    - "SPIDER"
    - "CAVE_SPIDER"
    - "PILLAGER"
    - "PIGLIN_BRUTE"
    - "BOGGED"
 
  
  # Hat items (worn by mobs to prevent burning in sunlight)
  # Golden helmets needed for nether mobs (blaze, magma cube, etc.)
  hat-items:
    - "LEATHER_HELMET"
    - "IRON_HELMET"
    - "GOLDEN_HELMET"
    - "CHAINMAIL_HELMET"

# Capture Point Settings
# ==============================================
capture-point:
  # Minimum radius in chunks (1 chunk = 16 blocks)
  min-radius: 1
  
  # Maximum radius in chunks
  max-radius: 10
  
  # Minimum reward amount in server currency
  min-reward: 100.0
  
  # Maximum reward amount in server currency
  max-reward: 10000.0
  
  # Minimum cooldown in milliseconds (default: 1 hour)
  # Time before a point can be captured again
  min-cooldown: 3600000
  
  # Maximum cooldown in milliseconds (default: 24 hours)
  max-cooldown: 86400000
  
  # Minimum players required per point
  min-players: 1
  
  # Maximum players allowed per point
  max-players: 10

# Capture Conditions
# ==============================================
capture-conditions:
  # Time restrictions (24-hour format)
  allowed-hours:
    start: 0  # 12 AM
    end: 24   # 12 AM (24 = no end time)
  
  # Weather restrictions
  allow-capture-in-rain: true
  allow-capture-in-storm: true
  
  # Anti-exploit settings
  anti-exploit:
    # Minimum distance between capture points (in chunks)
    min-point-distance: 10
    # Minimum time between captures by same town (in hours)
    min-town-capture-cooldown: 24
    # Whether to allow captures during server events
    allow-capture-during-events: false

# Reward Settings
# ==============================================
rewards:
  # Reward distribution type: "daily" or "hourly"
  # Daily: Rewards given once per Towny day to controlling towns
  # Hourly: Rewards given every hour proportional to holding time (daily_reward / 24 per hour)
  reward-type: "hourly"
  
  # Hourly reward interval in seconds (default: 3600 = 1 hour)
  # Only used when reward-type is "hourly"
  # Minimum: 1 second
  hourly-interval: 3600
  
  # Item rewards for capture points
  item-payouts:
    default: None
    oil: 64x Bucket Of Oil
    diamonds: 16x Diamond
    emeralds: 32x Emerald

# Protection Settings
# ==============================================
protection:
  # Whether to prevent claiming inside capture zones
  prevent-claiming: true
  
  # Whether to prevent setting homes inside capture zones
  prevent-homes: true
  
  # Whether to prevent teleporting inside capture zones
  prevent-teleporting: true
  
  # Whether to prevent using items inside capture zones
  prevent-item-use: false
  
  # Whether to prevent breaking blocks inside capture zones
  prevent-block-break: true
  
  # Whether to prevent placing blocks inside capture zones
  prevent-block-place: true
  
  # Whether to prevent explosions inside capture zones
  prevent-explosions: true
  
  # Whether to prevent PvP inside capture zones
  prevent-pvp: false
  
  # Buffer zone settings (in chunks)
  buffer-zone:
    # Whether to apply protection to buffer zones
    enabled: true
    # Size of buffer zone in chunks
    size: 1
    
  # Messages for protection violations
  messages:
    claiming-blocked: '&cYou cannot claim land in capture zones!'
    home-blocked: '&cYou cannot set homes in capture zones!'
    teleport-blocked: '&cYou cannot teleport in capture zones!'
    item-use-blocked: '&cYou cannot use items in capture zones!'
    block-break-blocked: '&cYou cannot break blocks in capture zones!'
    block-place-blocked: '&cYou cannot place blocks in capture zones!'
    explosion-blocked: '&cExplosions are not allowed in capture zones!'
    pvp-blocked: '&cPvP is not allowed in capture zones!'

# WorldGuard Integration
# ==============================================
worldguard:
  # Whether to prevent damage to structures in capture zones
  prevent_damage: true
  # Whether to prevent TNT explosions in capture zones
  prevent_explosions: true
  # Whether players can use items in capture zones
  allow_item_use: true

# Dynmap Integration
# ==============================================
dynmap:
  # Marker set ID and label
  marker-set: townycapture.markerset
  marker-set-label: Capture Points

  # Default style for markers
  strokeColor: '#000000'
  strokeOpacity: 0.8
  strokeWeight: 3
  fillColor: '#FF0000'
  fillOpacity: 0.35

  # Center marker settings
  center-marker:
    # Icon to use for the center marker
    # You can use any icon from Dynmap's icon set
    # Default icons: house, sign, flag, diamond, star, etc.
    icon: "skull"
    # Size of the icon (1.0 is normal size)
    size: 1.0
    # Whether to show the marker
    show: true
    # Whether to show the marker label
    show-label: true
    # Label format (supports placeholders)
    label-format: "%name%"
    # Whether to show the marker in the legend
    show-in-legend: true
    # Legend label
    legend-label: "Capture Point"

  # Area marker settings
  area-marker:
    # Whether to show the area border
    show-border: true
    # Whether to show the area fill
    show-fill: true
    # Whether to show the area in the legend
    show-in-legend: true
    # Legend label
    legend-label: "Capture Zone"
    # Whether to show buffer zone
    show-buffer: false
    # Buffer zone color
    buffer-color: '#FF0000'
    # Buffer zone opacity
    buffer-opacity: 0.2

  # Info window settings
  infowindow:
    # Template for the info window HTML
    template: '<div style="background-color: rgba(0,0,0,0.7); padding: 8px; border-radius: 5px; color: white;">
      <div style="font-size:120%; font-weight:bold; color: %control_color%;">%control_status% %controlling_town%</div>
      <div style="font-size:115%; margin-top:5px;">%name%</div>
      <div>• Type - %type%</div>
      <div>• Active: %active_status%</div>
      <div>• Preparation Duration - %prep_time% minutes</div>
      <div>• Capture Duration - %capture_time% minutes</div>
      <div>• Daily Payout - %reward%</div>
      <div>• Daily Item Payout - %item_payout%</div>
    </div>'
    # Whether to show the info window on click
    show-on-click: true
    # Whether to show the info window on hover
    show-on-hover: false

# Messages
# ==============================================
messages:
  errors:
    only-players: '&cOnly players can use this command!'
    not-in-town: '&cYou must be in a town to capture points!'
    already-capturing: '&cThis point is already being captured!'
    already-controlled: '&cYour town already controls this point!'
    too-far: '&cYou must be near the capture point to start capturing!'
    moved-too-far: '&cCapture cancelled! You moved too far from the capture point.'
    not-in-any-zone: '&cYou are not in any capture zone!'
    capture-failed: '&cFailed to start capture!'
    id-exists: '&cA capture point with this ID already exists!'
    invalid-number: '&cRadius and reward must be numbers!'
    no-permission: '&cYou don''t have permission to use this command!'
    usage-info: '&cUsage: /capturezone info <id>'
    usage-create: '&cUsage: /capturezone create <id> <name> <radius> <reward>'
    usage-delete: '&cUsage: /capturezone delete <id>'
    usage-stop: '&cUsage: /capturezone stop <id> [reason]'
    usage-forcecapture: '&cUsage: /capturezone forcecapture <id> <town>'
    usage-reset: '&cUsage: /capturezone reset <id>'
    usage-settype: '&cUsage: /capturezone settype <id> <type>'
    usage-setitempayout: '&cUsage: /capturezone setitempayout <id> <payout>'
    usage-deletezone: '&cUsage: /capturezone deletezone <id>'
    not-enough-players: '&cAt least %minplayers% players must be online to start a capture!'
    already-controlled-by-nation: '&cThis point is already controlled by a town in your nation!'
    already-controlled-by-ally: '&cThis point is already controlled by a town in an allied nation!'
    command-blocked: '&cThat command is blocked in this capture zone!'
    invulnerable-capturing: '&cYou cannot capture while invulnerable! Use /invulnerabilityoff to capture and fight'
    invulnerable-pvp: '&cPvP is disabled for new players! Use /invulnerabilityoff to fight'
    claim-blocked: '&cYou cannot claim this chunk, it would block access to the capture zone!'

  capture:
    start: '&c%town% &7is preparing to capture &c%point%&7!'
    phase_change: '&c%town% &7has completed preparation and is now capturing &c%point%&7!'
    progress: '&c%town% &7will capture &c%point% &7in &c%time% minutes!'
    complete: '&c%town% &7has captured &c%point%&7!'
    cancelled: '&c%town%''s &7capture of &c%point% &7has been cancelled!'
    admin_cancelled: '&c%town%''s &7capture of &c%point% &7has been cancelled by an admin!'
    death_victim: '&7Your capture of &c%point% &7has been cancelled because you were defeated by &c%killer%!'
    death_killer: '&7You have defeated &c%victim% &7and stopped their capture of &c%point%&7!'
    start-success: '&7Attempting to capture a zone!'
    death_broadcast: '&c%town%''s capture of %point% has been cancelled! %victim% was defeated by &c%killer%!'
    started: '&a%town% has started capturing %point%!'
    phase_started: '&c%town% has entered the capture phase for %point%!'
    reset: '&cCapture point %point% has been reset!'

  zone:
    enter: '&c☠ &c&lYOU ARE ENTERING THE CAPTURE ZONE %zone% &c☠'
    leave: '&c☠ &c&lYOU ARE LEAVING THE CAPTURE ZONE %zone% &c☠'
    continuous: '&c⚠ &c&lYOU ARE IN CAPTURE ZONE %zone% &c⚠'
    continuous-capturing: '&c⚔ &c&l%town% IS CAPTURING %zone% &c⚔'

  admin:
    force_capture: '&c%point% has been forcibly captured by %town% (Admin Action)'
    reset_point: '&c%point% has been reset and is now unclaimed (Admin Action)'
    type_changed: '&a%point% type changed to %type%'
    payout_changed: '&a%point% item payout changed to %item_payout%'

  reward:
    distributed: '&a%town% has received %reward% for controlling %point%!'
    hourly_distributed: '&a%town% has received %reward% hourly reward for controlling %point%!'
    item_distributed: '&a%town% has received %item_payout% for controlling %point%!'

  help:
    header: '&6===== CapturePoints Help ====='
    list: '&e/capturepoint list &7- List all capture points'
    info: '&e/capturepoint info <id> &7- Show info about a capture point'
    capture: '&e/capturepoint capture &7- Start capturing a point in your current zone'
    create: '&e/capturepoint create <id> <n> <radius> <reward> &7- Create a capture point'
    delete: '&e/capturepoint delete <id> &7- Delete a capture point'
    reload: '&e/capturepoint reload &7- Reload the plugin'
    admin: '&e/capturepoint admin &7- Show admin commands'

  adminhelp:
    header: '&6===== CapturePoints Admin Commands ====='
    stop: '&e/capturepoint stop <id> [reason] &7- Stop an active capture'
    forcecapture: '&e/capturepoint forcecapture <id> <town> &7- Force a town to capture a point'
    reset: '&e/capturepoint reset <id> &7- Reset a point to unclaimed state'
    settype: '&e/capturepoint settype <id> <type> &7- Set a point''s type'
    types: '&e/capturepoint types &7- List available point types'
    setitempayout: '&e/capturepoint setitempayout <id> <payout> &7- Set a point''s item payout'
    payouts: '&e/capturepoint payouts &7- List available item payouts'
    deletezone: '&e/capturepoint deletezone <id> &7- Delete a capture zone'
    reload: '&e/capturepoint reload &7- Reload the plugin configuration'

  integrations:
    header: '&6===== Integrations ====='
    dynmap: '&eDynmap: %dynmap%'
    worldguard: '&eWorldGuard: %worldguard%'

  warnings:
    approaching_edge: '&c⚠ Warning: You are approaching the edge of the capture zone! If you leave, the capture will be cancelled.'

  bossbar:
    preparation: '&ePreparing to capture: %point% - %time%'
    capture: '&c%town% is capturing %point% - %time%'

# Blocked Commands
# ==============================================
# Commands that are blocked while in a capture zone
# Add or remove commands as needed
blocked-commands:
  - /feed
  - /tpa
  - /cmi homes
  - /cmi home
  - /tpahere
  - /tpaccept
  - /home
  - /homes
  - /heal
  - /rt
  - /rtp
  - /wild
  - /spawn
  - /t spawn
  - /town spawn
  - /n spawn
  - /nation spawn
  - /ghome
  - /spawn
  - /ender
  - /ah
  - /gods
  - /cmi ender
  - /cmi rt
  - /cmi feed
  - /cmi tpa
  - /cmi tpahere
  - /cmi tpaccept
  - /cmi spawn
  - /cmi heal
  - /cmi homes
  - /cmi home
  - /cmi repair
  - /repair
  - /cmi sethome
  - /cmi home
  - /cmi clear
  - /clear
  - /dispose
  - /cmi dispose
  - /cmi back
  - /back
  - /mod-sp
  - /tfly
  - /townyfly
  - /townyflight
  - /gmarry
  - /gmarrygift
  - /gmarrytp
  - /t claim
  - /t new
  - /t create
  - /n new
  - /n create
  - /t claim outpost
  - /t unclaim
