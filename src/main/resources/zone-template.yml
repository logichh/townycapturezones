# ==============================================
# CaptureZones Zone Defaults
# This file is used as a template for new zones.
# It is copied into zones/<id>_config.yml when a zone is created.
# If you are editing a zone config, changes apply only to that zone.
# If you are editing this template, changes apply to new zones only.
# If you do not know what you are doing, do not edit this file.
# ==============================================

# Capture timing and rules for each capture phase
capture:
  # Preparation phase settings (before capture starts)
  preparation:
    # Minutes before capture begins (set to 0 to skip)
    duration: 1
    # Show countdown during preparation
    show-countdown: true
    # Allow PVP during preparation
    allow-pvp: true
  # Active capture phase settings
  capture:
    # Minutes the capture runs (set to 0 to disable capturing)
    duration: 15
    # Show countdown during capture
    show-countdown: true
    # Keep player inventory/XP on death while this zone has an active capture session.
    # No item drops, no XP drops, and no item durability/state changes.
    keep-inventory-on-death: false
    # Allow PVP during capture
    allow-pvp: true
    # Allow block breaking during capture
    allow-block-break: false
    # Allow block placing during capture
    allow-block-place: false
    # Allow item use (buckets, ender pearls, etc.) during capture
    allow-item-use: true
    # Allow explosions during capture
    allow-explosions: false
    # Allow teleport commands during capture
    allow-teleport: false
    # Allow Towny claiming during capture
    allow-claiming: false
    # Allow /home and Towny homes during capture
    allow-homes: false
  # Allow all commands in the zone during capture (false keeps command blocking active)
  allow-commands: false

# Reward configuration
rewards:
  # Base money reward amount (set to 0 to disable money payouts)
  base-reward: 1000.0
  # Reward schedule type: "hourly" or "daily"
  reward-type: "hourly"
  # Hourly payout mode: "STATIC" uses base-reward, "DYNAMIC" uses hourly-dynamic
  hourly-mode: "STATIC"
  hourly-dynamic:
    # Min and max payout for DYNAMIC hourly rewards
    min: 50
    max: 100
  # Interval in seconds for hourly rewards (3600 = 1 hour)
  hourly-interval: 3600
  # Legacy single item payout format (kept for backward compatibility)
  # Format: "MATERIAL:AMOUNT" or "None" to disable.
  item-payout: "None"
  item-rewards:
    # Enable modern item reward definitions.
    enabled: false
    # Behavior when recipient inventory cannot fit all items:
    # DROP = drop leftovers at recipient location, CANCEL = cancel item reward tick.
    inventory-full-behavior: "DROP"
    # Item definitions. Supported formats:
    # - "MATERIAL:AMOUNT"
    # - { material: "DIAMOND", amount: 2 }
    # - Full serialized ItemStack map (written by /capturezones zoneconfig <zone> itemrewards GUI)
    items:
      - "DIAMOND:1"
  permission-modifiers:
    # Enable permission-based reward tier modifiers.
    # Applies to economy reward amount before payout.
    enabled: false
    # Conflict policy when multiple permission tiers match:
    # HIGHEST = highest resulting reward wins
    # ADDITIVE = stack multipliers/flat bonuses
    # FIRST_MATCH = first matching tier in list order
    conflict-policy: "HIGHEST"
    # Tier definitions. Supported formats:
    # - "permission.node[:multiplier[:flatBonus]]"
    # - { permission: "capturezones.reward.vip", multiplier: 1.25, flat-bonus: 50.0 }
    tiers:
      - { permission: "capturezones.reward.vip", multiplier: 1.25, flat-bonus: 0.0 }
      - { permission: "capturezones.reward.elite", multiplier: 1.5, flat-bonus: 100.0 }
  permission-rewards:
    # Enable permission node rewards granted to an online owner member.
    # These rewards are plugin-managed and can be temporary or permanent.
    enabled: false
    # Permission grants. Supported formats:
    # - "permission.node" (permanent)
    # - "permission.node:7d" (temporary; units: ms, s, m, h, d, w)
    # - { permission: "permission.node", permanent: true }
    # - { permission: "permission.node", duration: "12h" }
    # - { permission: "permission.node", duration-ms: 600000 }
    grants:
      - { permission: "capturezones.rewardkit.weekly", duration: "7d" }
      - { permission: "capturezones.rewardkit.permanent", permanent: true }

# Reinforcement configuration
reinforcements:
  # Master toggle for reinforcements (false disables all reinforcement spawns)
  enabled: true
  spawn-rate:
    # Performance cap: max mobs spawned per tick for this zone
    max-per-tick: 3
  # How many mobs to spawn per wave
  mobs-per-wave: 1
  # Additional mobs added each phase (phase-scaled wave growth)
  wave-phase-increase: 1
  # Hard cap for mobs spawned in a single wave after phase scaling
  max-mobs-per-wave: 12
  # Seconds between waves
  wave-interval: 30
  # Stop spawning new waves when remaining capture time is at or below this value
  stop-spawning-under-seconds: 60
  # Max number of reinforcement mobs alive for this zone
  max-mobs-per-point: 50
  spawn-location:
    # How reinforcement spawn Y is chosen:
    # SURFACE = use highest terrain block at spawn X/Z (classic behavior; can place mobs on roofs)
    # ZONE_CENTER = use this zone center Y (best for indoor/closed arenas so mobs stay on arena level)
    # ORIGIN_PLAYER = use capturing player's current Y (follows the fight level in multi-floor areas)
    # CLAMPED = use SURFACE but clamp it to zone-center +/- clamp-range (hybrid between terrain and arena level)
    y-mode: "SURFACE"
    # Only used when y-mode = CLAMPED.
    # Example: zone center Y=70 and clamp-range=8 => final base Y is limited to 62..78.
    clamp-range: 8.0
    # Minimum horizontal distance from spawn origin (capturing initiator or zone center fallback)
    min-distance: 3.0
    # Maximum horizontal distance from spawn origin
    max-distance: 11.0
    # Vertical offset applied AFTER y-mode chooses the base Y.
    # Positive values push spawns up; negative values push spawns down.
    # Works with all y-modes (not only SURFACE).
    surface-offset: 1.0
  targeting:
    # CAPTURING_OWNER_ONLY, OPPOSING_OWNER_ONLY, ANY_PLAYER_IN_ZONE
    mode: "CAPTURING_OWNER_ONLY"
    # Extra chunk radius for zone membership checks used by targeting
    search-extra-chunks: 4
    # Target refresh interval in ticks
    retarget-interval-ticks: 20

  # MythicMobs integration (optional)
  mythicmobs:
    # Enable MythicMobs for this zone
    enabled: false
    # Spawn mode when MythicMobs is enabled: MYTHIC_ONLY or MIXED
    spawn-mode: "MIXED"
    # Percent chance (0-100) to spawn Mythic mobs in MIXED mode
    mix-chance: 100
    # List of MythicMob IDs to spawn
    mob-types:
      - "SkeletonKnight"
      - "ZombieWarrior"
      - "CustomGuard"
    # Mythic mob level multiplier (if used by your MythicMobs setup)
    mob-level: 1.0

  # Vanilla mob types (used when MythicMobs is disabled or in MIXED)
  # Use Bukkit entity type names. Empty list = no vanilla spawns.
  mob-types:
    - "ZOMBIE"
    - "SKELETON"
    - "WITHER_SKELETON"
    - "STRAY"
    - "HUSK"
    - "ZOMBIE_VILLAGER"
    - "SPIDER"
    - "CAVE_SPIDER"
    - "PILLAGER"
    - "BOGGED"

  # Optional helmet items to reduce daylight burn
  # Use Bukkit material names. Empty list = no hats.
  hat-items:
    - "LEATHER_HELMET"
    - "IRON_HELMET"
    - "GOLDEN_HELMET"
    - "CHAINMAIL_HELMET"

  # Capture timer reduction when reinforcement mobs die
  timer-reduction:
    # Seconds removed for vanilla mobs (random between min and max)
    vanilla:
      min: 1
      max: 3
    # Seconds removed for Mythic mobs (random between min and max)
    mythic:
      # Default range for any Mythic mob
      default:
        min: 1
        max: 3
      # Optional per-mob overrides (use exact MythicMob ID)
      per-mob:
        SkeletonKnight:
          min: 2
          max: 5

# Time window configuration
time-window:
  # Enable daily time window for captures (false = always allowed)
  enabled: false
  # Start time (24h)
  start-time: "00:00"
  # End time (24h)
  end-time: "23:59"

# Weekly reset configuration
weekly-reset:
  # Enable weekly reset for this zone
  enabled: true
  # Day of week to reset (MONDAY..SUNDAY)
  day: FRIDAY
  # Time of day to reset (24h)
  time: "00:00"
  first-capture-bonus:
    # Bonus for first capture after weekly reset
    enabled: true
    amount-range:
      # Random bonus range
      min: 500
      max: 1500

# Protection settings (outside of capture rules)
protection:
  # Prevent Towny claiming in the zone
  prevent-claiming: true
  # Prevent /home and Towny homes in the zone
  prevent-homes: true
  # Prevent teleporting into or out of the zone
  prevent-teleporting: true
  # Allow ender pearls even when teleporting is blocked
  allow-ender-pearls: false
  # Allow chorus fruit even when teleporting is blocked
  allow-chorus-fruit: false
  # Prevent item use (potions, buckets, ender pearls, etc.)
  prevent-item-use: false
  # Prevent block breaking
  prevent-block-break: true
  # Prevent block placing
  prevent-block-place: true
  # Prevent explosions
  prevent-explosions: true
  # Prevent PVP
  prevent-pvp: false

  buffer-zone:
    # Enable a protected buffer around the zone
    enabled: true
    # Buffer size in chunks (1 = one chunk ring around the zone)
    size: 1

# Capture conditions
capture-conditions:
  # Allowed capture hours (server time, 0-24)
  allowed-hours:
    start: 0
    end: 24
  # Weather conditions for capture start
  allow-capture-in-rain: true
  allow-capture-in-storm: true
  # Prevent capturing your own town's zone
  prevent-self-capture: true

  auto-capture:
    # Start capture automatically when a player enters the zone
    enabled: false
    # Minimum seconds between automatic start attempts per player per zone
    entry-debounce-seconds: 10

  recapture-policy:
    # Optional Towny-aware policy checks for zones controlled by related owner groups
    # (ignored automatically when Towny integration is unavailable/disabled)
    prevent-same-town: false
    prevent-same-nation: false

  speed-modifiers:
    # Master toggle for configurable capture speed scaling
    enabled: false
    # Base speed multiplier applied to normal capture countdown
    flat-multiplier: 1.0
    # Clamp bounds applied after all speed scaling is calculated
    min-multiplier: 0.1
    max-multiplier: 5.0
    owner-player-scaling:
      # Scale speed by capturing-owner player count in the zone
      enabled: false
      # Additional multiplier added for each extra player beyond the first
      per-extra-player: 0.25
      # Maximum number of extra players that can contribute to scaling
      max-extra-players: 4

  progress-display:
    actionbar:
      contested:
        # Enable contested actionbar updates for players inside the zone
        enabled: true
        # Minimum interval between contested actionbar updates (milliseconds)
        interval-ms: 2000
      grace:
        # Enable grace actionbar updates for capturing owner players
        enabled: true
        # Minimum interval between grace actionbar updates (milliseconds)
        interval-ms: 1000

  contested:
    # Enable contested state when the capturing owner and a competing owner are inside the zone
    enabled: false
    # Progress behavior while contested: PAUSE, DECAY, or ROLLBACK
    progress-policy: "PAUSE"
    # Used when progress-policy = DECAY (seconds added back to capture timer per second contested)
    decay-seconds: 1
    # Used when progress-policy = ROLLBACK (stronger reverse progress per second contested)
    rollback-seconds: 3

  leave-grace:
    # Enable a grace window before capture is cancelled when no capturing-owner players remain in zone
    enabled: false
    # Grace duration in seconds before cancellation
    duration-seconds: 15

  capture-cooldown:
    # Master toggle for capture cooldown enforcement
    enabled: true
    # Cooldown duration in milliseconds (300000 = 5 minutes)
    duration-ms: 300000
    # Apply cooldown after specific outcomes
    on-success: true
    on-cancel: false
    on-fail: false

    anti-instant-recapture:
      # Additional owner lock rules to prevent immediate back-and-forth recaptures
      enabled: false
      # Lock duration in milliseconds
      duration-ms: 300000
      # Block the previous controlling owner from instantly recapturing after they lose a zone
      lock-previous-owner: true
      # Block the latest attacker/capturing owner from instantly recapturing
      lock-previous-attacker: false

# Info window settings for map plugins
infowindow:
  # Info window HTML template (supports placeholders)
  template: "<div class=\"regioninfo\"><div style=\"font-size:120%; font-weight:bold; color:%control_color%;\">%control_status% %controlling_town%</div><div style=\"font-size:115%; margin-top:5px;\">%name%</div><div>&bull; %label_type% - %type%</div><div>&bull; %label_active%: %active_status%</div><div>&bull; %label_prep_time% - %prep_time% minutes</div><div>&bull; %label_capture_time% - %capture_time% minutes</div><div>&bull; %label_reward% - %reward%</div><div>&bull; %label_item_reward% - %item_payout%</div></div>"
  # Text to show when item reward is disabled
  item-payout-placeholder: "None"
  colors:
    # Status text colors
    controlled: "#00FF00"
    unclaimed: "#8B0000"
    capturing: "#FFAA00"
  text:
    # Status label text
    controlled: "Controlled by"
    unclaimed: "Unclaimed"
    capturing: "Being captured by"

# Dynmap area colors (status-based)
colors:
  # Fill and border colors for unclaimed zones
  unclaimed-fill: "#8B0000"
  unclaimed-border: "#404040"
  # Fill and border colors for controlled zones
  claimed-fill: "#0000FF"
  claimed-border: "#FF0000"
  # Fill and border colors for capturing zones
  capturing-fill: "#FF0000"
  capturing-border: "#FF0000"

# Bossbar configuration
bossbar:
  # Master toggle for capture bossbar updates
  enabled: true
  # Show contested bossbar state/title while contested
  contested-enabled: true
  # Show grace bossbar state/title while grace timer is active
  grace-enabled: true
  # Bossbar title during capture (placeholders: %town% %point% %player% %time_left%)
  title: "&e%town% is capturing %point% (Started by %player%) - %time_left%"
  color:
    # Bossbar color by phase
    start: RED
    middle: YELLOW
    end: GREEN
  # Death message title when a player dies in the zone
  death_title: "&c%victim% has been defeated by %killer% at %point%!"

# Hologram display (per-zone)
hologram:
  # Enable hologram rendering for this zone
  enabled: false
  # Suspend hologram rendering/updates when no players are near this zone
  pause-when-no-players-nearby: true
  # Viewer distance in blocks required for this zone hologram to stay active
  visibility-range: 64.0
  # Number of hologram stacks around zone center (1 = center only, 4 = all sides)
  instances: 1
  # Horizontal distance in blocks from center for multi-instance layout
  horizontal-offset: 1.25
  # true = world-fixed orientation, false = face viewer
  fixed-orientation: false
  # Vertical offset above zone center
  height-offset: -5.0
  # Spacing between each line
  line-spacing: 0.25
  # Max lines rendered for this zone hologram
  max-lines: 8
  # Configurable hologram lines with placeholders:
  # {zone} {zone_id} {status} {owner} {owner_type}
  # {capturing_owner} {capturing_owner_type}
  # {reward} {item_reward} {time_left} {progress}
  # {label_status} {label_owner} {label_reward} {label_time}
  lines:
    - "&6&l{zone}"
    - "&7{label_status}: &e{status}"
    - "&7{label_owner}: &b{owner}"
    - "&7{label_reward}: &a${reward}"
    - "&7{label_time}: &f{time_left}"

# Dynmap integration (per-zone)
dynmap:
  # Enable Dynmap markers for this zone
  enabled: true
  # Dynmap marker icon id
  icon: "skull"
  # Toggle marker point, label, and area polygon
  show-marker: true
  show-label: true
  show-area: true
  # Area outline style
  strokeColor: "#000000"
  strokeOpacity: 0.8
  strokeWeight: 3
  # Area fill style
  fillColor: "#FF0000"
  fillOpacity: 0.35
  # Buffer outline (requires protection.buffer-zone.enabled)
  show-buffer: false
  buffer-color: "#FF0000"
  buffer-opacity: 0.2

# BlueMap integration (per-zone)
bluemap:
  # Enable BlueMap markers for this zone
  enabled: true
  # Outline width in blocks
  line-width: 2
  # Outline opacity (0-1)
  line-opacity: 0.8
  # Fill opacity (0-1)
  fill-opacity: 0.3
  colors:
    # Area colors by status
    unclaimed: "#808080"
    controlled: "#8B0000"
    capturing: "#FFA500"
  # Show extra details in markers
  show-details: true
